import{a as j}from"./chunk-FAUQFWYB.js";import{a as V,b as u,c as D,d as G,e as L,f as A,g as I,j as q,k as U}from"./chunk-K6HC6ABD.js";import{G as N}from"./chunk-65T2XKK6.js";import{g as y,h as M,k as T,n as k}from"./chunk-YGVZ7NKW.js";import{$a as m,$b as P,Da as a,Qa as E,V as v,_a as l,aa as C,ba as _,db as F,eb as o,fb as n,gb as d,ka as S,ma as x,mb as R,o as b,ob as p,ub as h,wb as s,xb as g}from"./chunk-PMUFEJA4.js";function z(t,i){if(t&1&&(o(0,"div",6),C(),o(1,"svg",20),d(2,"path",21),n(),_(),o(3,"span"),s(4),n()()),t&2){let r=p();a(4),g(r.errorMessage())}}function H(t,i){if(t&1&&(o(0,"span",12),s(1),n()),t&2){let r=p();a(),g(r.formUtils.getFieldError(r.registerForm,"email"))}}function O(t,i){if(t&1&&(o(0,"span",12),s(1),n()),t&2){let r=p();a(),g(r.formUtils.getFieldError(r.registerForm,"password"))}}function Y(t,i){if(t&1&&(o(0,"span",12),s(1),n()),t&2){let r=p();a(),g(r.formUtils.getFieldError(r.registerForm,"confirmPassword"))}}function J(t,i){t&1&&(o(0,"span",12),s(1,"Las contrase\xF1as no coinciden."),n())}function K(t,i){t&1&&(d(0,"span",22),s(1," Creando cuenta... "))}function Q(t,i){t&1&&s(0," Crear Cuenta ")}var B=class t{fb=v(q);authService=v(N);router=v(y);registerForm;registerTrigger=S(null);registerResource=k({params:()=>this.registerTrigger(),stream:({params:i})=>i?this.authService.register(i.email,i.password):b(null)});formUtils=j;constructor(){this.registerForm=this.fb.group({email:["",[u.required,u.email]],password:["",[u.required,u.minLength(6)]],confirmPassword:["",[u.required]]},{validators:this.passwordMatchValidator}),x(()=>{this.registerResource.hasValue()&&this.registerResource.value()&&(console.log("Registro exitoso, navegando a /home"),this.router.navigate(["/home"]))})}passwordMatchValidator=i=>{let r=i.get("password")?.value,e=i.get("confirmPassword")?.value;return r&&e&&r!==e?{passwordMismatch:!0}:null};onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}let{email:i,password:r}=this.registerForm.value;this.registerTrigger.set({email:i,password:r})}loading=this.registerResource.isLoading;errorMessage=()=>{let i=this.registerResource.error();if(!i)return"";let r=i.code||"";return{"auth/email-already-in-use":"Este correo ya est\xE1 registrado","auth/invalid-email":"El correo electr\xF3nico no es v\xE1lido","auth/operation-not-allowed":"Operaci\xF3n no permitida","auth/weak-password":"La contrase\xF1a es muy d\xE9bil (m\xEDnimo 6 caracteres)","auth/network-request-failed":"Error de red. Verifica tu conexi\xF3n."}[r]||"Error al registrar usuario"};get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get confirmPassword(){return this.registerForm.get("confirmPassword")}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=E({type:t,selectors:[["app-register"]],decls:38,vars:13,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-secondary","to-accent","p-4"],[1,"card","w-full","max-w-md","bg-base-100","shadow-2xl"],[1,"card-body"],[1,"text-center","mb-6"],[1,"text-3xl","font-bold","text-secondary","mb-2"],[1,"text-base-content/70"],[1,"alert","alert-error","mb-4"],[3,"ngSubmit","formGroup"],[1,"form-control","mb-4"],[1,"label"],[1,"label-text"],["type","email","formControlName","email","placeholder","ejemplo@correo.com",1,"input","input-bordered","w-full"],[1,"block","text-red-500","text-sm","mt-1"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input","input-bordered","w-full"],["type","password","formControlName","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input","input-bordered","w-full"],[1,"form-control","mt-6"],["type","submit",1,"btn","btn-secondary","w-full",3,"disabled"],[1,"text-center","mt-4"],[1,"text-sm","text-base-content/70"],["routerLink","/login",1,"link","link-secondary","font-semibold"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"loading","loading-spinner","loading-sm"]],template:function(r,e){if(r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),s(5,"Crear Cuenta"),n(),o(6,"p",5),s(7,"Reg\xEDstrate para comenzar"),n()(),l(8,z,5,1,"div",6),o(9,"form",7),R("ngSubmit",function(){return e.onSubmit()}),o(10,"div",8)(11,"label",9)(12,"span",10),s(13,"Correo electr\xF3nico"),n()(),d(14,"input",11),l(15,H,2,1,"span",12),n(),o(16,"div",8)(17,"label",9)(18,"span",10),s(19,"Contrase\xF1a"),n()(),d(20,"input",13),l(21,O,2,1,"span",12),n(),o(22,"div",8)(23,"label",9)(24,"span",10),s(25,"Confirmar Contrase\xF1a"),n()(),d(26,"input",14),l(27,Y,2,1,"span",12)(28,J,2,0,"span",12),n(),o(29,"div",15)(30,"button",16),l(31,K,2,0)(32,Q,1,0),n()()(),o(33,"div",17)(34,"p",18),s(35," \xBFYa tienes cuenta? "),o(36,"a",19),s(37," Inicia sesi\xF3n aqu\xED "),n()()()()()()),r&2){let c,f,w;a(8),m(e.registerResource.error()?8:-1),a(),F("formGroup",e.registerForm),a(5),h("input-error",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),a(),m((c=e.registerForm.get("email"))!=null&&c.invalid&&((c=e.registerForm.get("email"))!=null&&c.touched)?15:-1),a(5),h("input-error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),a(),m((f=e.registerForm.get("password"))!=null&&f.invalid&&((f=e.registerForm.get("password"))!=null&&f.touched)?21:-1),a(5),h("input-error",(e.confirmPassword==null?null:e.confirmPassword.invalid)&&(e.confirmPassword==null?null:e.confirmPassword.touched)||(e.confirmPassword==null?null:e.confirmPassword.touched)&&(e.registerForm.errors==null?null:e.registerForm.errors.passwordMismatch)),a(),m((w=e.registerForm.get("confirmPassword"))!=null&&w.invalid&&((w=e.registerForm.get("confirmPassword"))!=null&&w.touched)?27:e.registerForm.errors!=null&&e.registerForm.errors.passwordMismatch&&(e.confirmPassword!=null&&e.confirmPassword.touched)?28:-1),a(3),F("disabled",e.loading()||e.registerForm.invalid),a(),m(e.loading()?31:32)}},dependencies:[P,U,L,V,D,G,I,A,T,M],encapsulation:2})};export{B as Register};
